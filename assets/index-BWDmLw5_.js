var e=Object.defineProperty,l=Object.defineProperties,a=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable,r=(l,a,s)=>a in l?e(l,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):l[a]=s;import{d as i,cW as n,v as u,cX as d,s as c,c as m,a as p,o as f,aA as v,e as b,f as h,h as y,j as _,k as g,y as x,i as w,p as k,z as j,G as B,H as S,u as V,l as A,m as O,I as E}from"./index-80d0f50K.js";/* empty css                  */import{E as L}from"./el-popover-DiC7Ch-6.js";/* empty css                    */import"./el-button-fxR6_Zjf.js";/* empty css                        *//* empty css                     */import{a as z,b as U,E as C}from"./el-dropdown-item-TZ_fPzGv.js";import{_ as I}from"./index.vue_vue_type_script_setup_true_lang-DgRTW2yt.js";import{T as H}from"./formEnum-BLgiZVxV.js";import{u as P}from"./index-C5QPwOKL.js";import{l as T}from"./vue-draggable-plus-COAXvOk1.js";/* empty css                */import{u as $}from"./useAuth-CLpp_3ia.js";import{E as q}from"./index-CEhrLX_Z.js";import{E as F}from"./index-B5UyqyHu.js";import{_ as G}from"./_plugin-vue_export-helper-BCo6x5W8.js";const M={class:"flex-cb max-md:!block",id:"art-table-header"},Z={class:"flex-wrap"},D={class:"flex-c md:justify-end max-md:mt-3 max-sm:!hidden"},K={class:"button"},R={class:"button"},W={class:"button"},J=i((Q=((e,l)=>{for(var a in l||(l={}))o.call(l,a)&&r(e,a,l[a]);if(s)for(var a of s(l))t.call(l,a)&&r(e,a,l[a]);return e})({},{name:"ArtTableHeader"}),X={__name:"index",props:n({showZebra:{type:Boolean,default:!0},showBorder:{type:Boolean,default:!0},showHeaderBackground:{type:Boolean,default:!0},fullClass:{default:"art-page-view"},layout:{default:"search,refresh,size,fullscreen,columns,settings"},loading:{type:Boolean},showSearchBar:{type:Boolean,default:void 0},searchAuth:{},refreshAuth:{}},{columns:{required:!1,default:()=>[]},columnsModifiers:{}}),emits:n(["refresh","search","update:showSearchBar"],["update:columns"]),setup(e,{emit:l}){const{hasAuth:a}=$(),{t:s}=u(),o=e,t=d(e,"columns"),r=l,i=[{value:H.SMALL,label:s("table.sizeOptions.small")},{value:H.DEFAULT,label:s("table.sizeOptions.default")},{value:H.LARGE,label:s("table.sizeOptions.large")}],n=P(),{tableSize:G,isZebra:J,isBorder:Q,isHeaderBackground:X}=c(n),N=m(()=>o.layout.split(",").map(e=>e.trim())),Y=e=>!!N.value.includes(e)&&("search"===e&&o.searchAuth?a(o.searchAuth):"refresh"!==e||!o.refreshAuth||a(o.refreshAuth)),ee=e=>{const l=e.related;return!l||!l.classList.contains("fixed-column")},le=()=>{r("update:showSearchBar",!o.showSearchBar),r("search")},ae=()=>{oe.value=!0,r("refresh")},se=e=>{P().setTableSize(e)},oe=p(!1),te=p(!1),re=p(""),ie=()=>{const e=document.querySelector(`.${o.fullClass}`);e&&(te.value=!te.value,te.value?(re.value=document.body.style.overflow,document.body.style.overflow="hidden",e.classList.add("el-full-screen"),n.setIsFullScreen(!0)):(document.body.style.overflow=re.value,e.classList.remove("el-full-screen"),n.setIsFullScreen(!1)))},ne=e=>{"Escape"===e.key&&te.value&&ie()};return f(()=>{document.addEventListener("keydown",ne)}),v(()=>{if(document.removeEventListener("keydown",ne),te.value){document.body.style.overflow=re.value;const e=document.querySelector(`.${o.fullClass}`);e&&e.classList.remove("el-full-screen")}}),(l,a)=>{const o=I,r=U,n=z,u=C,d=F,c=L;return h(),b("div",M,[y("div",Z,[_(l.$slots,"left",{},void 0,!0)]),y("div",D,[null!=e.showSearchBar?(h(),b("div",{key:0,class:w(["button",e.showSearchBar?"active !bg-theme hover:!bg-theme/80":""]),onClick:le},[k(o,{icon:"ri:search-line",class:w(e.showSearchBar?"text-white":"text-g-700")},null,8,["class"])],2)):g("",!0),Y("refresh")?(h(),b("div",{key:1,class:w(["button",{loading:e.loading&&oe.value}]),onClick:ae},[k(o,{icon:"ri:refresh-line",class:w(e.loading&&oe.value?"animate-spin text-g-600":"")},null,8,["class"])],2)):g("",!0),Y("size")?(h(),x(u,{key:2,onCommand:se},{dropdown:j(()=>[k(n,null,{default:j(()=>[(h(),b(B,null,S(i,e=>y("div",{key:e.value,class:"table-size-btn-item [&_.el-dropdown-menu__item]:!mb-[3px] last:[&_.el-dropdown-menu__item]:!mb-0"},[(h(),x(r,{key:e.value,command:e.value,class:w(V(G)===e.value?"!bg-g-300/55":"")},{default:j(()=>[A(O(e.label),1)]),_:2},1032,["command","class"]))])),64))]),_:1})]),default:j(()=>[y("div",K,[k(o,{icon:"ri:arrow-up-down-fill"})])]),_:1})):g("",!0),Y("fullscreen")?(h(),b("div",{key:3,class:"button",onClick:ie},[k(o,{icon:te.value?"ri:fullscreen-exit-line":"ri:fullscreen-line"},null,8,["icon"])])):g("",!0),Y("columns")?(h(),x(c,{key:4,placement:"bottom",trigger:"click"},{reference:j(()=>[y("div",R,[k(o,{icon:"ri:align-right"})])]),default:j(()=>[y("div",null,[k(V(q),{"max-height":"380px"},{default:j(()=>[k(V(T),{modelValue:t.value,"onUpdate:modelValue":a[0]||(a[0]=e=>t.value=e),disabled:!1,filter:".fixed-column","prevent-on-filter":!1,onMove:ee},{default:j(()=>[(h(!0),b(B,null,S(t.value,e=>{return h(),b("div",{key:e.prop||e.type,class:w(["column-option flex-c",{"fixed-column":e.fixed}])},[y("div",{class:w(["drag-icon mr-2 h-4.5 flex-cc text-g-500",e.fixed?"cursor-default text-g-300":"cursor-move"])},[k(o,{icon:e.fixed?"ri:unpin-line":"ri:drag-move-2-fill",class:"text-base"},null,8,["icon"])],2),k(d,{"model-value":(l=e,void 0!==l.visible?l.visible:null==(a=l.checked)||a),"onUpdate:modelValue":l=>((e,l)=>{const a=!!l;e.checked=a,e.visible=a})(e,l),disabled:e.disabled,class:"flex-1 min-w-0 [&_.el-checkbox__label]:overflow-hidden [&_.el-checkbox__label]:text-ellipsis [&_.el-checkbox__label]:whitespace-nowrap"},{default:j(()=>[A(O(e.label||("selection"===e.type?V(s)("table.selection"):"")),1)]),_:2},1032,["model-value","onUpdate:modelValue","disabled"])],2);var l,a}),128))]),_:1},8,["modelValue"])]),_:1})])]),_:1})):g("",!0),Y("settings")?(h(),x(c,{key:5,placement:"bottom",trigger:"click"},{reference:j(()=>[y("div",W,[k(o,{icon:"ri:settings-line"})])]),default:j(()=>[y("div",null,[e.showZebra?(h(),x(d,{key:0,modelValue:V(J),"onUpdate:modelValue":a[1]||(a[1]=e=>E(J)?J.value=e:null),value:!0},{default:j(()=>[A(O(V(s)("table.zebra")),1)]),_:1},8,["modelValue"])):g("",!0),e.showBorder?(h(),x(d,{key:1,modelValue:V(Q),"onUpdate:modelValue":a[2]||(a[2]=e=>E(Q)?Q.value=e:null),value:!0},{default:j(()=>[A(O(V(s)("table.border")),1)]),_:1},8,["modelValue"])):g("",!0),e.showHeaderBackground?(h(),x(d,{key:2,modelValue:V(X),"onUpdate:modelValue":a[3]||(a[3]=e=>E(X)?X.value=e:null),value:!0},{default:j(()=>[A(O(V(s)("table.headerBackground")),1)]),_:1},8,["modelValue"])):g("",!0)])]),_:1})):g("",!0),_(l.$slots,"right",{},void 0,!0)])])}}},l(Q,a(X))));var Q,X;const N=G(J,[["__scopeId","data-v-889e1b3b"]]);export{N as _};
