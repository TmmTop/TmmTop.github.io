var e=(e,a,t)=>new Promise((l,r)=>{var s=e=>{try{n(t.next(e))}catch(a){r(a)}},u=e=>{try{n(t.throw(e))}catch(a){r(a)}},n=e=>e.done?l(e.value):Promise.resolve(e.value).then(s,u);n((t=t.apply(e,a)).next())});import{_ as a}from"./index-BwH-yH7E.js";import{g as t,b as l}from"./dept-P1pZEdqx.js";import{d as r,a as s,c as u,dR as n,o as c,y as o,f as d,u as h,I as i}from"./index-Q3P-rwBo.js";const p=r({__name:"user-search",props:{modelValue:{},searchAuth:{},resetAuth:{}},emits:["update:modelValue","search","reset"],setup(r,{emit:p}){const m=n(r,["searchAuth","resetAuth"]),y=p,f=s(),v=u({get:()=>m.modelValue,set:e=>y("update:modelValue",e)}),b={},V=s([{label:"启用",value:1},{label:"禁用",value:0}]),x=s([]);c(()=>e(null,null,function*(){yield function(){return e(this,null,function*(){try{const e=yield t(),a=yield l(e);x.value=a||[]}catch(e){}})}()}));const A=u(()=>[{label:"用户名",key:"username",type:"input",placeholder:"请输入用户名",clearable:!0},{label:"状态",key:"status",type:"select",props:{placeholder:"请选择状态",options:V.value,clearable:!0}},{label:"部门",key:"deptId",type:"treeselect",props:{placeholder:"请选择部门",data:x.value,nodeKey:"id",props:{label:"dept_name",value:"id",children:"children"},defaultExpandedKeys:_(),clearable:!0,checkStrictly:!0}}]);function _(){const e=[],a=t=>{t.forEach(t=>{e.push(t.id),t.children&&t.children.length>0&&a(t.children)})};return a(x.value),e}function k(){y("reset")}function g(){return e(this,null,function*(){yield f.value.validate(),y("search",v.value)})}return(e,t)=>{const l=a;return d(),o(l,{ref_key:"searchBarRef",ref:f,modelValue:h(v),"onUpdate:modelValue":t[0]||(t[0]=e=>i(v)?v.value=e:null),items:h(A),rules:b,"search-auth":r.searchAuth,"reset-auth":r.resetAuth,onReset:k,onSearch:g},null,8,["modelValue","items","search-auth","reset-auth"])}}});export{p as _};
