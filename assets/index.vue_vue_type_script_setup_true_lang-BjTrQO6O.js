import{_ as e}from"./index.vue_vue_type_script_setup_true_lang-Cy6sF_S5.js";import{d as a,q as t,s as l,a as r,c as s,ct as o,cu as n,cv as i,w as u,aL as c,o as d,b as v,e as f,g as p,i as h,u as x,h as m,k as g,p as y,j as w,f as b,cw as k}from"./index-Q3P-rwBo.js";const _=["innerHTML"],C=["innerHTML"],H=a({__name:"index",props:{text:{default:""},type:{default:"theme"},direction:{default:"left"},speed:{default:80},width:{default:"100%"},height:{default:"36px"},pauseOnHover:{type:Boolean,default:!0},showClose:{type:Boolean,default:!1},alwaysScroll:{type:Boolean,default:!0}},emits:["close"],setup(a,{emit:H}){const L=a,$=H,T=()=>{$("close")},M=t(),{isDark:j}=l(M),B=r(),R=r(),O=r(),S=r(!1),q=r(0),z=r(0),A=r(0),D=r(!1),K=s(()=>"left"===L.direction||"right"===L.direction),N=s(()=>"right"===L.direction||"down"===L.direction),{width:P,height:W}=o(B),X=n(B),Y=s(()=>!L.alwaysScroll&&z.value<=A.value||L.pauseOnHover&&X.value),E=s(()=>{const e={theme:"text-theme/90 !border-theme/50",primary:"text-primary/90 !border-primary/50",secondary:"text-secondary/90 !border-secondary/50",error:"text-error/90 !border-error/50",info:"text-info/90 !border-info/50",success:"text-success/90 !border-success/50",warning:"text-warning/90 !border-warning/50",danger:"text-danger/90 !border-danger/50"};return e[L.type]||e.theme}),F=s(()=>`color-mix(in oklch, var(--color-${L.type}) ${j.value?"25":"10"}%, var(--art-color))`),G=s(()=>({width:L.width,height:L.height,backgroundColor:F.value})),I=s(()=>K.value?"":"flex flex-col"),J=s(()=>({transform:K.value?`translateX(${q.value}px)`:`translateY(${q.value}px)`,willChange:"transform"})),Q=s(()=>K.value?{marginLeft:"2em"}:{marginTop:"2em"}),U=()=>{if(!B.value||!O.value)return;const e=O.value;K.value?(A.value=P.value,z.value=e.offsetWidth):(A.value=W.value,z.value=e.offsetHeight);const a=z.value>A.value;D.value=a,q.value=(A.value-z.value)/2,S.value||(S.value=!0)},V=k(U,150);let Z=0;const{pause:ee,resume:ae}=i(({timestamp:e})=>{if(Z||(Z=e),!Y.value){const a=(e-Z)/1e3,t=L.speed*a,l=.1*z.value;q.value+=N.value?t:-t,N.value?q.value>A.value&&(q.value=-(z.value+l)):q.value<-(z.value+l)&&(q.value=A.value)}Z=e},{immediate:!1}),te=e=>{"A"===e.target.tagName&&e.stopPropagation()};u([P,W],()=>{V()}),u(()=>[L.direction,L.speed,L.text],()=>{U(),Z=0});const{start:le}=c(()=>{U(),ae()},100);return d(()=>{le()}),v(()=>{ee()}),(t,l)=>{const r=e;return b(),f("div",{ref_key:"containerRef",ref:B,class:h(["relative overflow-hidden rounded-custom-sm border flex-c box-border text-sm",x(E)]),style:p(x(G))},[m("div",{class:"flex-cc absolute left-0 h-full w-9 z-10",style:p({backgroundColor:x(F)})},[y(r,{icon:"ri:volume-down-line",class:"text-lg"})],4),m("div",{ref_key:"contentRef",ref:R,class:h(["whitespace-nowrap inline-block transition-opacity duration-600 [&_a]:text-danger [&_a:hover]:underline [&_a:hover]:text-danger/80 px-9",[x(I),{"opacity-0":!x(S),"opacity-100":x(S)}]]),style:p(x(J)),onClick:te},[m("span",{ref_key:"textRef",ref:O,class:"inline-block"},[w(t.$slots,"default",{},()=>[m("span",{innerHTML:a.text},null,8,_)])],512),x(D)?(b(),f("span",{key:0,class:"inline-block",style:p(x(Q))},[w(t.$slots,"default",{},()=>[m("span",{innerHTML:a.text},null,8,C)])],4)):g("",!0)],6),a.showClose?(b(),f("div",{key:0,class:"flex-cc absolute right-0 h-full w-9 c-p",style:p({backgroundColor:x(F)}),onClick:T},[y(r,{icon:"ri:close-fill",class:"text-lg"})],4)):g("",!0)],6)}}});export{H as _};
