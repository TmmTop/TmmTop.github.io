var e=(e,l,a)=>new Promise((t,o)=>{var s=e=>{try{d(a.next(e))}catch(l){o(l)}},r=e=>{try{d(a.throw(e))}catch(l){o(l)}},d=e=>e.done?t(e.value):Promise.resolve(e.value).then(s,r);d((a=a.apply(e,l)).next())});import{d as l,c as a,a as t,r as o,w as s,y as r,f as d,z as i,p as u,u as p,h as m,l as n,I as c,N as f,n as g}from"./index-Q3P-rwBo.js";import{E as v}from"./el-dialog-DSZOKVfF.js";import"./el-overlay-BNvnZVrW.js";import{E as b}from"./el-button-CEOXYcAP.js";import{E as _,a as y}from"./el-form-item-BUQepiSo.js";/* empty css               */import{E as V,a as j}from"./el-option-pz7fCg4E.js";/* empty css                  *//* empty css                     *//* empty css                  *//* empty css                 *//* empty css                        */import{E as h}from"./el-row-DCMltfBO.js";import{E as x}from"./el-col-BUW-HwBC.js";import{d as w,e as N}from"./system-manage-Yy_3S9IV.js";import{E as C}from"./index-CLGBRhnv.js";import{E}from"./index-Cr-VvCPY.js";const U={class:"dialog-footer"},D=l({__name:"post-dialog",props:{visible:{type:Boolean},type:{},postData:{}},emits:["update:visible","submit"],setup(l,{emit:D}){const k=l,P=D,q=a({get:()=>k.visible,set:e=>P("update:visible",e)}),H=a(()=>k.type),I=t(),M=t(!1),O=o({postCode:"",postName:"",description:"",sort:0,status:1}),R={postCode:[{required:!0,message:"请输入岗位编码",trigger:"blur"},{min:2,max:50,message:"长度在 2 到 50 个字符",trigger:"blur"}],postName:[{required:!0,message:"请输入岗位名称",trigger:"blur"},{min:2,max:50,message:"长度在 2 到 50 个字符",trigger:"blur"}],description:[{max:500,message:"长度不能超过 500 个字符",trigger:"blur"}]};s(()=>[k.visible,k.type,k.postData],([l])=>{l&&(e(null,null,function*(){const e="edit"===H.value&&k.postData,l=k.postData;Object.assign(O,{postCode:e&&l&&l.post_code||"",postName:e&&l&&l.post_name||"",description:e&&l&&l.description||"",sort:e&&l?l.sort:0,status:e&&l?l.status:1})}),g(()=>{var e;null==(e=I.value)||e.clearValidate()}))},{immediate:!0});const z=()=>e(null,null,function*(){I.value&&(yield I.value.validate(l=>e(null,null,function*(){var e;if(l){M.value=!0;try{"add"===H.value?(yield w(O),f.success("添加成功")):(yield N(null==(e=k.postData)?void 0:e.id,O),f.success("更新成功")),q.value=!1,P("submit")}catch(a){f.error(a.message||"操作失败")}finally{M.value=!1}}})))});return(e,l)=>{const a=C,t=y,o=x,s=h,f=E,g=j,w=V,N=_,D=b,k=v;return d(),r(k,{modelValue:p(q),"onUpdate:modelValue":l[6]||(l[6]=e=>c(q)?q.value=e:null),title:"add"===p(H)?"添加岗位":"编辑岗位",width:"600px","align-center":"","close-on-click-modal":!1},{footer:i(()=>[m("div",U,[u(D,{onClick:l[5]||(l[5]=e=>q.value=!1)},{default:i(()=>[...l[7]||(l[7]=[n("取消",-1)])]),_:1}),u(D,{type:"primary",onClick:z,loading:p(M)},{default:i(()=>[...l[8]||(l[8]=[n("提交",-1)])]),_:1},8,["loading"])])]),default:i(()=>[u(N,{ref_key:"formRef",ref:I,model:p(O),rules:R,"label-width":"100px"},{default:i(()=>[u(s,{gutter:20},{default:i(()=>[u(o,{span:12},{default:i(()=>[u(t,{label:"岗位编码",prop:"postCode"},{default:i(()=>[u(a,{modelValue:p(O).postCode,"onUpdate:modelValue":l[0]||(l[0]=e=>p(O).postCode=e),placeholder:"请输入岗位编码",disabled:"edit"===p(H)},null,8,["modelValue","disabled"])]),_:1})]),_:1}),u(o,{span:12},{default:i(()=>[u(t,{label:"岗位名称",prop:"postName"},{default:i(()=>[u(a,{modelValue:p(O).postName,"onUpdate:modelValue":l[1]||(l[1]=e=>p(O).postName=e),placeholder:"请输入岗位名称"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),u(t,{label:"岗位描述",prop:"description"},{default:i(()=>[u(a,{modelValue:p(O).description,"onUpdate:modelValue":l[2]||(l[2]=e=>p(O).description=e),type:"textarea",rows:3,placeholder:"请输入岗位描述"},null,8,["modelValue"])]),_:1}),u(s,{gutter:20},{default:i(()=>[u(o,{span:12},{default:i(()=>[u(t,{label:"排序",prop:"sort"},{default:i(()=>[u(f,{modelValue:p(O).sort,"onUpdate:modelValue":l[3]||(l[3]=e=>p(O).sort=e),min:0,max:999,placeholder:"请输入排序",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),u(o,{span:12},{default:i(()=>[u(t,{label:"状态",prop:"status"},{default:i(()=>[u(w,{modelValue:p(O).status,"onUpdate:modelValue":l[4]||(l[4]=e=>p(O).status=e),placeholder:"请选择状态",style:{width:"100%"}},{default:i(()=>[u(g,{label:"启用",value:1}),u(g,{label:"禁用",value:0})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])}}});export{D as _};
