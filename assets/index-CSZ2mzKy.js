var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,r=(t,a,l)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[a]=l,o=(e,t)=>{for(var a in t||(t={}))n.call(t,a)&&r(e,a,t[a]);if(l)for(var a of l(t))s.call(t,a)&&r(e,a,t[a]);return e},d=(e,l)=>t(e,a(l));import{af as i,a1 as c,aj as u,dr as p,bf as m,c as y,_ as v,d as f,W as h,e as g,f as b,k as x,h as k,G as D,H as j,m as w,u as C,i as _,j as O,a as V,ae as Y,dw as $,p as M,z as S,l as P,bC as I,bp as R,bB as E,y as U,ao as H,az as z,I as A}from"./index-80d0f50K.js";import{E as F}from"./el-dialog-1gzNkj9H.js";import"./el-overlay-GydQvYeA.js";import{E as W,a as q}from"./el-button-fxR6_Zjf.js";import{E as T,a as B}from"./el-form-item-fw-CxUqd.js";/* empty css                 *//* empty css                     *//* empty css                  */import{a as G,b as L}from"./el-radio-DDAcykNW.js";/* empty css                       *//* empty css                        */import{r as N,l as Q,W as X,E as Z}from"./index-CUUo-P1Q.js";import{I as J,U as K}from"./event-BwRzfsZt.js";import{E as ee}from"./index-HP-ZmGVO.js";import{_ as te}from"./plugin-vue_export-helper-BCo6x5W8.js";import"./index-Dno4FvM4.js";import"./vnode-C3kCkgDK.js";import"./index-BLqz4iRr.js";import"./scroll-CqYFcAjh.js";import"./index-D9I8kgnD.js";import"./aria-Dle50h-X.js";import"./index-CYUG33U5.js";import"./refs-Cw5r5QN8.js";import"./index-DF4pWoDg.js";import"./index-Bn1nBgds.js";import"./use-form-common-props-rfRIAI9b.js";import"./castArray-BIDSuBfr.js";import"./baseClone-DeaHpYmZ.js";import"./initCloneObject-DW4GtkWT.js";import"./index-DS3wKJiq.js";import"./index-CEhrLX_Z.js";import"./index-Cu67jiIU.js";import"./debounce-PPvesCyO.js";import"./toNumber-Bai2bLmh.js";import"./index-CMopGODU.js";import"./index-C1O-KxyN.js";const ae=c({selectedDay:{type:u(Object)},range:{type:u(Array)},date:{type:u(Object),required:!0},hideHeader:{type:Boolean}}),le={pick:e=>i(e)},ne=(e,t)=>{p.extend(Q);const a=p.localeData().firstDayOfWeek(),{t:l,lang:n}=m(),s=p().locale(n.value),r=y(()=>!!e.range&&!!e.range.length),o=y(()=>{let t=[];if(r.value){const[a,l]=e.range,n=N(l.date()-a.date()+1).map(e=>({text:a.date()+e,type:"current"}));let s=n.length%7;s=0===s?0:7-s;const r=N(s).map((e,t)=>({text:t+1,type:"next"}));t=n.concat(r)}else{const l=e.date.startOf("month").day(),n=((e,t)=>{const a=e.subtract(1,"month").endOf("month").date();return N(t).map((e,l)=>a-(t-l-1))})(e.date,(l-a+7)%7).map(e=>({text:e,type:"prev"})),s=(e=>{const t=e.daysInMonth();return N(t).map((e,t)=>t+1)})(e.date).map(e=>({text:e,type:"current"}));t=[...n,...s];const r=7-(t.length%7||7),o=N(r).map((e,t)=>({text:t+1,type:"next"}));t=t.concat(o)}return(e=>N(e.length/7).map(t=>{const a=7*t;return e.slice(a,a+7)}))(t)}),d=y(()=>{const e=a;return 0===e?X.map(e=>l(`el.datepicker.weeks.${e}`)):X.slice(e).concat(X.slice(0,e)).map(e=>l(`el.datepicker.weeks.${e}`))}),i=(t,a)=>{switch(a){case"prev":return e.date.startOf("month").subtract(1,"month").date(t);case"next":return e.date.startOf("month").add(1,"month").date(t);case"current":return e.date.date(t)}};return{now:s,isInRange:r,rows:o,weekDays:d,getFormattedDate:i,handlePickDay:({text:e,type:a})=>{const l=i(e,a);t("pick",l)},getSlotData:({text:t,type:a})=>{const l=i(t,a);return{isSelected:l.isSame(e.selectedDay),type:`${a}-month`,day:l.format("YYYY-MM-DD"),date:l.toDate()}}}},se=f({name:"DateTable"});var re=v(f(d(o({},se),{props:ae,emits:le,setup(e,{expose:t,emit:a}){const l=e,{isInRange:n,now:s,rows:r,weekDays:o,getFormattedDate:d,handlePickDay:i,getSlotData:c}=ne(l,a),u=h("calendar-table"),p=h("calendar-day"),m=({text:e,type:t})=>{const a=[t];if("current"===t){const n=d(e,t);n.isSame(l.selectedDay,"day")&&a.push(p.is("selected")),n.isSame(s,"day")&&a.push(p.is("today"))}return a};return t({getFormattedDate:d}),(e,t)=>(b(),g("table",{class:_([C(u).b(),C(u).is("range",C(n))]),cellspacing:"0",cellpadding:"0"},[e.hideHeader?x("v-if",!0):(b(),g("thead",{key:0},[k("tr",null,[(b(!0),g(D,null,j(C(o),e=>(b(),g("th",{key:e,scope:"col"},w(e),1))),128))])])),k("tbody",null,[(b(!0),g(D,null,j(C(r),(t,a)=>(b(),g("tr",{key:a,class:_({[C(u).e("row")]:!0,[C(u).em("row","hide-border")]:0===a&&e.hideHeader})},[(b(!0),g(D,null,j(t,(t,a)=>(b(),g("td",{key:a,class:_(m(t)),onClick:e=>C(i)(t)},[k("div",{class:_(C(p).b())},[O(e.$slots,"date-cell",{data:C(c)(t)},()=>[k("span",null,w(t.text),1)])],2)],10,["onClick"]))),128))],2))),128))])],2))}})),[["__file","date-table.vue"]]);const oe=c({modelValue:{type:Date},range:{type:u(Array),validator:e=>Y(e)&&2===e.length&&e.every(e=>$(e))}}),de={[K]:e=>$(e),[J]:e=>$(e)},ie=f({name:"ElCalendar"});const ce=H(v(f(d(o({},ie),{props:oe,emits:de,setup(e,{expose:t,emit:a}){const l=e,n=h("calendar"),{calculateValidatedDateRange:s,date:r,pickDay:o,realSelectedDay:d,selectDate:i,validatedRange:c}=((e,t)=>{const{lang:a}=m(),l=V(),n=p().locale(a.value),s=y({get:()=>e.modelValue?o.value:l.value,set(e){if(!e)return;l.value=e;const a=e.toDate();t(J,a),t(K,a)}}),r=y(()=>{if(!e.range||!Y(e.range)||2!==e.range.length||e.range.some(e=>!$(e)))return[];const t=e.range.map(e=>p(e).locale(a.value)),[l,n]=t;return l.isAfter(n)?[]:l.isSame(n,"month")?v(l,n):l.add(1,"month").month()!==n.month()?[]:v(l,n)}),o=y(()=>e.modelValue?p(e.modelValue).locale(a.value):s.value||(r.value.length?r.value[0][0]:n)),d=y(()=>o.value.subtract(1,"month").date(1)),i=y(()=>o.value.add(1,"month").date(1)),c=y(()=>o.value.subtract(1,"year").date(1)),u=y(()=>o.value.add(1,"year").date(1)),v=(e,t)=>{const a=e.startOf("week"),l=t.endOf("week"),n=a.get("month"),s=l.get("month");return n===s?[[a,l]]:(n+1)%12===s?((e,t)=>{const a=e.endOf("month"),l=t.startOf("month"),n=a.isSame(l,"week");return[[e,a],[(n?l.add(1,"week"):l).startOf("week"),t]]})(a,l):n+2===s||(n+1)%11===s?((e,t)=>{const a=e.endOf("month"),l=e.add(1,"month").startOf("month"),n=a.isSame(l,"week")?l.add(1,"week"):l,s=n.endOf("month"),r=t.startOf("month"),o=s.isSame(r,"week")?r.add(1,"week"):r;return[[e,a],[n.startOf("week"),s],[o.startOf("week"),t]]})(a,l):[]},f=e=>{s.value=e};return{calculateValidatedDateRange:v,date:o,realSelectedDay:s,pickDay:f,selectDate:e=>{const t={"prev-month":d.value,"next-month":i.value,"prev-year":c.value,"next-year":u.value,today:n}[e];t.isSame(o.value,"day")||f(t)},validatedRange:r}})(l,a),{t:u}=m(),v=y(()=>{const e=`el.datepicker.month${r.value.format("M")}`;return`${r.value.year()} ${u("el.datepicker.year")} ${u(e)}`});return t({selectedDay:d,pickDay:o,selectDate:i,calculateValidatedDateRange:s}),(e,t)=>(b(),g("div",{class:_(C(n).b())},[k("div",{class:_(C(n).e("header"))},[O(e.$slots,"header",{date:C(v)},()=>[k("div",{class:_(C(n).e("title"))},w(C(v)),3),0===C(c).length?(b(),g("div",{key:0,class:_(C(n).e("button-group"))},[M(C(q),null,{default:S(()=>[M(C(W),{size:"small",onClick:e=>C(i)("prev-month")},{default:S(()=>[P(w(C(u)("el.datepicker.prevMonth")),1)]),_:1},8,["onClick"]),M(C(W),{size:"small",onClick:e=>C(i)("today")},{default:S(()=>[P(w(C(u)("el.datepicker.today")),1)]),_:1},8,["onClick"]),M(C(W),{size:"small",onClick:e=>C(i)("next-month")},{default:S(()=>[P(w(C(u)("el.datepicker.nextMonth")),1)]),_:1},8,["onClick"])]),_:1})],2)):x("v-if",!0)])],2),0===C(c).length?(b(),g("div",{key:0,class:_(C(n).e("body"))},[M(re,{date:C(r),"selected-day":C(d),onPick:C(o)},I({_:2},[e.$slots["date-cell"]?{name:"date-cell",fn:S(t=>[O(e.$slots,"date-cell",R(E(t)))])}:void 0]),1032,["date","selected-day","onPick"])],2)):(b(),g("div",{key:1,class:_(C(n).e("body"))},[(b(!0),g(D,null,j(C(c),(t,a)=>(b(),U(re,{key:a,date:t[0],"selected-day":C(d),range:t,"hide-header":0!==a,onPick:C(o)},I({_:2},[e.$slots["date-cell"]?{name:"date-cell",fn:S(t=>[O(e.$slots,"date-cell",R(E(t)))])}:void 0]),1032,["date","selected-day","range","hide-header","onPick"]))),128))],2))],2))}})),[["__file","calendar.vue"]])),ue={class:"page-content mb-5"},pe=["onClick"],me={class:"absolute top-1 right-1 text-sm"},ye={class:"flex flex-col gap-1 w-full max-h-21 pr-1 mt-6 overflow-y-auto"},ve=["onClick"],fe={class:"dialog-footer"},he=te(f(d(o({},{name:"TemplateCalendar"}),{__name:"index",setup(e){const t=[{label:"基本",value:"primary"},{label:"成功",value:"success"},{label:"警告",value:"warning"},{label:"危险",value:"danger"}],a=V(new Date("2025-02-07")),l=V(!1),n=V("添加事件"),s=V(-1),r=V([{date:"2025-02-01",content:"产品需求评审",type:"primary"},{date:"2025-02-03",endDate:"2025-02-05",content:"项目周报会议（跨日期）",type:"primary"},{date:"2025-02-10",content:"瑜伽课程",type:"success"},{date:"2025-02-15",content:"团队建设活动",type:"primary"},{date:"2025-02-20",content:"健身训练",type:"success"},{date:"2025-02-20",content:"代码评审",type:"danger"},{date:"2025-02-20",content:"团队午餐",type:"primary"},{date:"2025-02-20",content:"项目进度汇报",type:"warning"},{date:"2025-02-28",content:"月度总结会",type:"warning"}]),i=V({date:"",endDate:"",content:"",type:"primary"}),c=y(()=>s.value>=0),u=()=>{i.value={date:"",endDate:"",content:"",type:"primary"},s.value=-1},p=()=>{i.value.content&&i.value.date&&(c.value?r.value[s.value]=o({},i.value):r.value.push(o({},i.value)),l.value=!1,u())},m=()=>{c.value&&(r.value.splice(s.value,1),l.value=!1,u())};return(e,y)=>{const v=ce,f=ee,h=B,O=L,V=G,Y=Z,$=T,I=W,R=F;return b(),g("div",ue,[M(v,{modelValue:C(a),"onUpdate:modelValue":y[0]||(y[0]=e=>A(a)?a.value=e:null)},{"date-cell":S(({data:e})=>{return[k("div",{class:_(["relative flex flex-col h-full min-h-30 max-h-30 p-1 overflow-hidden c-p",{"is-selected":e.isSelected}]),onClick:t=>{return a=e.day,n.value="添加事件",i.value={date:a,content:"",type:"primary"},s.value=-1,void(l.value=!0);var a}},[k("p",me,w((a=e.day,a.split("-")[2])),1),k("div",ye,[(b(!0),g(D,null,j((t=e.day,r.value.filter(e=>{const a=new Date(e.date),l=new Date(t),n=e.endDate?new Date(e.endDate):new Date(e.date);return l>=a&&l<=n}).map(e=>{const{bgClass:t,textClass:a}=((e="primary")=>({primary:{bgClass:"bg-theme/12",textClass:"text-theme"},success:{bgClass:"bg-success/12",textClass:"text-success"},warning:{bgClass:"bg-warning/12",textClass:"text-warning"},danger:{bgClass:"bg-danger/12",textClass:"text-danger"}}[e]))(e.type);return d(o({},e),{bgClass:t,textClass:a})})),e=>(b(),g("div",{key:`${e.date}-${e.content}`,onClick:z(t=>(e=>{n.value="编辑事件",i.value=o({},e),s.value=r.value.findIndex(t=>t.date===e.date&&t.content===e.content),l.value=!0})(e),["stop"])},[k("div",{class:_(["min-w-25 px-3 py-1.5 overflow-hidden text-xs/6 font-medium text-ellipsis whitespace-nowrap rounded hover:opacity-80",[e.bgClass,e.textClass]])},w(e.content),3)],8,ve))),128))])],10,pe)];var t,a}),_:1},8,["modelValue"]),M(R,{modelValue:C(l),"onUpdate:modelValue":y[5]||(y[5]=e=>A(l)?l.value=e:null),title:C(n),width:"600px",onClosed:u},{footer:S(()=>[k("span",fe,[C(c)?(b(),U(I,{key:0,type:"danger",onClick:m},{default:S(()=>[...y[6]||(y[6]=[P(" 删除 ",-1)])]),_:1})):x("",!0),M(I,{type:"primary",onClick:p},{default:S(()=>[P(w(C(c)?"更新":"添加"),1)]),_:1})])]),default:S(()=>[M($,{model:C(i),"label-width":"80px"},{default:S(()=>[M(h,{label:"活动标题",required:""},{default:S(()=>[M(f,{modelValue:C(i).content,"onUpdate:modelValue":y[1]||(y[1]=e=>C(i).content=e),placeholder:"请输入活动标题"},null,8,["modelValue"])]),_:1}),M(h,{label:"事件颜色"},{default:S(()=>[M(V,{modelValue:C(i).type,"onUpdate:modelValue":y[2]||(y[2]=e=>C(i).type=e)},{default:S(()=>[(b(),g(D,null,j(t,e=>M(O,{key:e.value,value:e.value},{default:S(()=>[P(w(e.label),1)]),_:2},1032,["value"])),64))]),_:1},8,["modelValue"])]),_:1}),M(h,{label:"开始日期",required:""},{default:S(()=>[M(Y,{style:{width:"100%"},modelValue:C(i).date,"onUpdate:modelValue":y[3]||(y[3]=e=>C(i).date=e),type:"date",placeholder:"选择日期",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1}),M(h,{label:"结束日期"},{default:S(()=>[M(Y,{style:{width:"100%"},modelValue:C(i).endDate,"onUpdate:modelValue":y[4]||(y[4]=e=>C(i).endDate=e),type:"date",placeholder:"选择结束日期",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD","min-date":C(i).date},null,8,["modelValue","min-date"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}})),[["__scopeId","data-v-297c2b51"]]);export{he as default};
